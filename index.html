<!DOCTYPE html>
<htlml>
    <head>
      <title>Proches Et Vous </title>
      <script src="./js/Adapters/DBRepository.js"></script>
      <script type="module">
        (function() {
          'use strict';
          if (!('indexedDB' in window)) {
            console.log('This browser doesn\'t support IndexedDB');
            return;
          } else {
            try{
              DBRepository.init(function(success){
                if(success){
                  //window.location.href = "./views/login.html";

                  DBRepository.seedUsers(function(userSeedSuccess){
                    console.log('users initialized');
                    DBRepository.seedEvents(function(eventSeedSuccess){
                      console.log('events initialized');
                      DBRepository.SeedEventParticipations(function(eventParticipationSuccess){
                        console.log('eventParticipations initialized');

                      });
                    });
                  });

                  //DB Adapter tests :
                  console.log("Adapter tests ---");
                  DBRepository.getUser(1, function(user){
                    console.log(user.fullname)
                  });
                  //DBRepository.getLastId("users", function(lastID){

                  //});


                } else {
                  document.getElementById('#maintitle').innerHTML = "Une erreure s'est produite ! RÃ©essayer plus tard";
                }
                
              });
            } catch(Err){
              console.log(Err);
            }

          }
        })();
        
      </script>
      <!--<meta http-equiv="refresh" content="0; url=./views/login.html" />-->
    </head>
    <body>
        <h1 id="maintitle"> Nous chargeons le site, un peu de patience ! </h1>
        <div>

        </div>
    </body>
</html>